<?xml version='1.0' encoding='UTF-8'?>
<MorpheusModel version="3">
    <Description>
        <Title>Example-ShellCA</Title>
        <Details>This model implements Wolframs's rule 90 (https://en.wikipedia.org/wiki/Rule_90) generating Sierpinski triangles (https://en.wikipedia.org/wiki/Sierpinski_triangle).</Details>
    </Description>
    <Global>
        <Field symbol="out" value="0">
            <Diffusion rate="0.0"/>
        </Field>
        <Equation symbol-ref="out">
            <Expression>state</Expression>
        </Equation>
    </Global>
    <Space>
        <Lattice class="linear">
            <Size symbol="size" value="500, 0, 0"/>
            <BoundaryConditions>
                <Condition boundary="x" type="periodic"/>
            </BoundaryConditions>
            <Neighborhood>
                <Order>1</Order>
            </Neighborhood>
        </Lattice>
        <SpaceSymbol symbol="space"/>
    </Space>
    <Time>
        <StartTime value="0"/>
        <StopTime value="250"/>
        <TimeSymbol symbol="time"/>
    </Time>
    <CellTypes>
        <CellType class="biological" name="cells">
            <Property symbol="state" value="0.0"/>
            <Property symbol="n_state" value="0.0"/>
            <System solver="heun" time-step="1.0">
                <Rule symbol-ref="state">
                    <Expression>(n_state)== 1</Expression>
                </Rule>
            </System>
            <NeighborhoodReporter>
                <Input scaling="cell" value="state"/>
                <Output symbol-ref="n_state" mapping="sum"/>
            </NeighborhoodReporter>
        </CellType>
        <CellType class="medium" name="medium">
            <Property symbol="state" value="0.0"/>
        </CellType>
    </CellTypes>
    <CellPopulations>
        <Population size="100" type="cells">
            <InitCellLattice/>
            <InitProperty symbol-ref="state">
                <Expression>if(cell.center.x == 140 
or cell.center.x == 141 
or cell.center.x == 160 
or cell.center.x == 161 
or cell.center.x == 170 
or cell.center.x == 171 , 1, 0)</Expression>
            </InitProperty>
        </Population>
    </CellPopulations>
    <Analysis>
        <Logger time-step="1">
            <Input>
                <Symbol symbol-ref="out"/>
            </Input>
            <Output>
                <TextOutput file-format="matrix"/>
            </Output>
            <Plots>
                <SurfacePlot time-step="-1">
                    <Color-bar palette="gray" reverse-palette="true">
                        <Symbol symbol-ref="out"/>
                    </Color-bar>
                    <Terminal terminal="png"/>
                </SurfacePlot>
            </Plots>
        </Logger>
    </Analysis>
</MorpheusModel>
